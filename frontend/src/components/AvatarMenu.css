.avatar-menu-wrapper { position: relative; display:flex; }
.avatar-trigger { position:relative; border:1px solid var(--color-border); background:var(--color-surface); cursor:pointer; width:40px; height:40px; border-radius:50%; display:flex; align-items:center; justify-content:center; padding:0; box-shadow:var(--shadow-sm); }
.avatar-trigger:focus-visible { outline:2px solid var(--color-accent); outline-offset:2px; }
.avatar-trigger .avatar.placeholder { width:100%; height:100%; border-radius:50%; background:linear-gradient(135deg,var(--violet-400), var(--rose-300)); box-shadow:0 0 0 1px var(--color-border); }
.avatar-img { width:100%; height:100%; object-fit:cover; border-radius:50%; box-shadow:0 0 0 1px var(--color-border); }

.avatar-popover { position:absolute; top:calc(100% + 10px); right:0; width:260px; background:var(--color-surface); border:1px solid var(--color-border); border-radius:16px; padding:.9rem .85rem 1rem; box-shadow:0 12px 28px -10px rgba(17,12,46,.32), 0 4px 10px -4px rgba(17,12,46,.18); display:flex; flex-direction:column; gap:.75rem; animation:popFade .16s ease-out; z-index:120; }
@keyframes popFade { from { opacity:0; transform:translateY(-4px); } to { opacity:1; transform:translateY(0); } }
.avatar-pop-divider { height:1px; background:var(--color-border); opacity:.6; margin:-.25rem 0 -.25rem; }
.avatar-upload-block { display:flex; align-items:center; justify-content:space-between; gap:.5rem; }
.upload-label { cursor:pointer; font-size:.62rem; font-weight:600; letter-spacing:.5px; padding:.4rem .65rem; border:1px solid var(--color-border); border-radius:10px; background:var(--color-surface-alt); color:var(--color-text); display:inline-flex; }
.upload-label:hover { background:var(--color-surface); }
.clear-btn { cursor:pointer; background:var(--color-danger); color:#fff; border:1px solid var(--color-danger); font-size:.6rem; padding:.4rem .55rem; border-radius:9px; font-weight:600; }
.clear-btn:hover { filter:brightness(1.1); }
.avatar-hint { font-size:.55rem; line-height:1.2; color:var(--color-text-muted); text-align:center; margin-top:-.35rem; }

/* Dark theme adjustments */
body.theme-dark .avatar-popover { background:var(--color-topbar); }
