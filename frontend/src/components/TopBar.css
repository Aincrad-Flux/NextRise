.topbar { display: flex; align-items: center; justify-content: space-between; gap: 1rem; padding: 0.65rem 1.1rem; background: var(--color-topbar); color: var(--color-text); border: 1px solid var(--color-border); backdrop-filter: blur(12px) saturate(1.2); border-radius: 18px; margin: 0.65rem 0.9rem 0.85rem; box-shadow: 0 12px 24px -16px rgba(17, 12, 46, 0.18), 0 2px 6px -2px rgba(17, 12, 46, 0.08); position: sticky; top: 0.5rem; z-index: 40; }
/* When nav absent (startup) we can tighten spacing */
.topbar.no-nav { justify-content: space-between; }
/* Center navigation */
.topbar-nav { display: flex; gap: 0.5rem; flex: 1 1 auto; justify-content: center; }
.nav-btn { appearance: none; background: transparent; color: var(--color-text-muted); text-decoration: none; font-size: 0.85rem; padding: 0.5rem 0.85rem; border-radius: var(--radius-sm); font-weight: 500; line-height: 1; position: relative; transition: background .15s, color .15s; border:1px solid transparent; }
.nav-btn::after { content:""; position:absolute; left: 12px; right: 12px; bottom: 6px; height: 2px; border-radius: 2px; background: linear-gradient(90deg, var(--violet-500), var(--rose-300)); opacity: 0; transform: translateY(2px); transition: opacity .15s, transform .15s; }
.nav-btn:hover { background: var(--color-surface-alt); color: var(--color-text); }
.nav-btn:hover::after { opacity: 1; transform: translateY(0); }
.nav-btn:focus-visible { outline: 2px solid var(--color-accent); outline-offset: 2px; }
.nav-btn:active { background: var(--color-surface); }

/* Left side */
.topbar-left { display: flex; align-items: center; gap: 0.65rem; flex-wrap: nowrap; }
.brand { font-size: 1.05rem; margin: 0; font-weight: 600; white-space: nowrap; letter-spacing:.6px; background:linear-gradient(90deg,var(--violet-500), var(--rose-400)); -webkit-background-clip:text; background-clip:text; color:transparent; }
.home-link { display: inline-flex; line-height: 0; flex-shrink: 0; align-items: center; justify-content: center; width: 30px; height: 30px; border-radius: 10px; background: var(--color-surface); border:1px solid var(--color-border); box-shadow: var(--shadow-sm); transition: background .2s, border-color .2s; }
.home-link:hover { background: var(--color-surface-alt); }
.home-icon { width: 22px; height: 22px; display: block; filter: drop-shadow(0 0 3px rgba(56,189,248,.35)); }

/* Right side */
.topbar-right { display: flex; align-items: center; gap: 0.75rem; }
.auth-buttons { display: flex; gap: 0.55rem; }
.auth-btn { display: inline-flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 600; padding: 0.5rem 0.85rem; border-radius: var(--radius-sm); text-decoration: none; line-height: 1; border: 1px solid var(--color-border); background: var(--color-surface); color: var(--color-text-muted); transition: background .15s, border-color .15s, color .15s, box-shadow .2s; box-shadow: var(--shadow-sm); }
.auth-btn:hover { background: var(--color-surface-alt); border-color: var(--color-border); color: var(--color-text); }
.auth-btn:focus-visible { outline: 2px solid var(--color-accent); outline-offset: 2px; }
.auth-btn.sign-up { background: linear-gradient(135deg,var(--violet-500), var(--rose-300)); border: 1px solid var(--violet-300); color: #ffffff; box-shadow: 0 8px 18px -6px rgba(193, 116, 242, .45); }
.auth-btn.sign-up:hover { filter: brightness(1.07); }
.auth-btn.sign-up:active { filter: brightness(.93); }
.auth-btn.sign-in { background: var(--color-surface); }
.auth-btn.sign-in:active { background: var(--color-surface-alt); }
.avatar { width: 32px; height: 32px; border-radius: 50%; background: linear-gradient(135deg,var(--violet-400), var(--rose-300)); box-shadow: 0 0 0 1px var(--color-border); }

/* Mobile: hamburger toggle, hide desktop nav/auth, overlay menu */
@media (max-width: 768px) {
	.topbar { padding: 0.5rem 0.65rem; gap: 0.5rem; border-radius: 14px; }
	.brand { font-size: 0.95rem; }
	.home-link { width: 28px; height: 28px; border-radius: 9px; }
	.home-icon { width: 20px; height: 20px; }

		/* Hide desktop nav and header auth on small screens (not the popup) */
		.topbar-nav, .topbar-right > .auth-buttons { display: none; }

	/* Show menu toggle */
	.menu-toggle { display: inline-flex; align-items: center; justify-content: center; width: 36px; height: 36px; border-radius: 10px; border: 1px solid var(--color-border); background: var(--color-surface); color: var(--color-text); cursor: pointer; box-shadow: var(--shadow-sm); }
	.menu-toggle:hover { background: var(--color-surface-alt); }
	.menu-toggle:focus-visible { outline: 2px solid var(--color-accent); outline-offset: 2px; }

	/* Overlay */
	.mobile-menu-overlay { position: fixed; inset: 0; background: rgba(0,0,0,.4); backdrop-filter: blur(1px); display: flex; justify-content: flex-end; z-index: 100; }
	.mobile-menu { width: min(88vw, 360px); height: 100%; background: var(--color-topbar); border-left: 1px solid var(--color-border); box-shadow: -8px 0 24px rgba(17, 12, 46, 0.12); display: flex; flex-direction: column; padding: 0.75rem; gap: 0.75rem; animation: slideIn .18s ease-out; }
	@keyframes slideIn { from { transform: translateX(12px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

	.mobile-menu-header { display: flex; align-items: center; justify-content: space-between; }
	.brand-mobile { font-size: 1rem; }
	.menu-close { display: inline-flex; width: 34px; height: 34px; align-items: center; justify-content: center; border-radius: 10px; border: 1px solid var(--color-border); background: var(--color-surface); color: var(--color-text); cursor: pointer; }
	.menu-close:hover { background: var(--color-surface-alt); }

	.mobile-nav { display: flex; flex-direction: column; gap: 0.35rem; padding: 0.25rem 0; }
	.mobile-nav .nav-btn { font-size: 0.95rem; padding: 0.7rem 0.85rem; border: 1px solid var(--color-border); background: var(--color-surface); color: var(--color-text); border-radius: 10px; box-shadow: var(--shadow-sm); }
	.mobile-nav .nav-btn:hover { background: var(--color-surface-alt); }

	.mobile-actions { margin-top: auto; display: flex; flex-direction: column; gap: 0.5rem; }
		.mobile-actions .auth-buttons { display: flex; }
	.profile-row { display: flex; align-items: center; gap: 0.65rem; padding-top: 0.5rem; border-top: 1px dashed var(--color-border); }
	.profile-meta { display: flex; flex-direction: column; line-height: 1.1; color: var(--color-text-muted); }
}

/* Desktop: hide menu toggle */
@media (min-width: 769px) {
	.menu-toggle { display: none; }
}

	/* a11y helpers */
	.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }
